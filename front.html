<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="icon" type="image/png" href="favicon.png">

  <meta charset="UTF-8" />
  <title>Token Risk Checker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0d1117;
      color: #c9d1d9;
      padding: 2rem;
    }

    .container {
      max-width: 500px;
      margin: auto;
      background-color: #161b22;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 0 12px #1f6feb;
    }

    input, button {
      width: 100%;
      padding: 0.8rem;
      margin-top: 1rem;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
    }

    input {
      background: #0d1117;
      color: white;
      border: 1px solid #30363d;
    }

    button {
      background-color: #238636;
      color: white;
      cursor: pointer;
    }

    button:disabled {
      background: gray;
    }

    #result {
      margin-top: 1rem;
      padding: 1rem;
      background: #21262d;
      border-radius: 8px;
      word-wrap: break-word;
    }

    .loader {
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>–ê–Ω–∞–ª–∏–∑ —Ç–æ–∫–µ–Ω–∞</h1>
    <input type="text" id="address" placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å —Ç–æ–∫–µ–Ω–∞" />
    <button id="check" onclick="checkRisk()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    <div class="loader" id="loader" style="display: none;">üîç –ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
    <div id="result"></div>
  </div>

  <script>
    async function checkRisk() {
      const address = document.getElementById("address").value;
      const resultDiv = document.getElementById("result");
      const loader = document.getElementById("loader");
      const button = document.getElementById("check");

      resultDiv.innerHTML = "";
      loader.style.display = "block";
      button.disabled = true;

      try {
        const res = await fetch("http://localhost:5000/risk-score", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ address })
        });

        const data = await res.json();

        if (data.error) {
          resultDiv.innerHTML = `‚ùå –û—à–∏–±–∫–∞: ${data.error}`;
        } else {
          resultDiv.innerHTML = `
            <strong>–ê–¥—Ä–µ—Å:</strong> ${data.address}<br/>
            <strong>–ò–º—è:</strong> ${data.token_info.name}<br/>
            <strong>–°–∏–º–≤–æ–ª:</strong> ${data.token_info.symbol}<br/>
            <strong>–î–µ—Å—è—Ç–∏—á–Ω—ã–µ:</strong> ${data.token_info.decimals}<br/>
            <strong>–†–∏—Å–∫-–±–∞–ª–ª:</strong> ${data.risk_score}/100<br/>
            <strong>–ü—Ä–∏—á–∏–Ω—ã:</strong>
            <ul>${data.explanations.map(e => `<li>${e}</li>`).join('')}</ul>
          `;
        }
        if (data.risk_score === 0) {
  resultDiv.innerHTML = `
    <strong>–ê–¥—Ä–µ—Å:</strong> ${data.address}<br/>
    <strong>–ò–º—è:</strong> ${data.token_info.name}<br/>
    <strong>–°–∏–º–≤–æ–ª:</strong> ${data.token_info.symbol}<br/>
    <strong>–î–µ—Å—è—Ç–∏—á–Ω—ã–µ:</strong> ${data.token_info.decimals}<br/>
    <strong>–†–∏—Å–∫-–±–∞–ª–ª:</strong> ‚úÖ 0/100 ‚Äî –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ç–æ–∫–µ–Ω<br/>
    <strong>–û—Ç—á—ë—Ç:</strong>
    <ul>
      <li>üîí –ö–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π</li>
      <li>üìÑ –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω</li>
      <li>üß™ –¢–æ–∫–µ–Ω –ø—Ä–æ—à—ë–ª –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏</li>
    </ul>
  `;
} else {
  resultDiv.innerHTML = `
    <strong>–ê–¥—Ä–µ—Å:</strong> ${data.address}<br/>
    <strong>–ò–º—è:</strong> ${data.token_info.name}<br/>
    <strong>–°–∏–º–≤–æ–ª:</strong> ${data.token_info.symbol}<br/>
    <strong>–î–µ—Å—è—Ç–∏—á–Ω—ã–µ:</strong> ${data.token_info.decimals}<br/>
    <strong>–†–∏—Å–∫-–±–∞–ª–ª:</strong> ‚ö†Ô∏è ${data.risk_score}/100<br/>
    <strong>–ü—Ä–∏—á–∏–Ω—ã:</strong>
    <ul>${data.explanations.map(e => `<li>${e}</li>`).join('')}</ul>
  `;
}

      } catch (error) {
        resultDiv.innerHTML = `‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: ${error}`;
      } finally {
        loader.style.display = "none";
        button.disabled = false;
      }
    }
  </script>
</body>
</html>
